<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Track Meet</title>
  <link rel="stylesheet" href="../styles/popup.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="logo-section">
        <span class="logo-icon">üèÉ‚Äç‚ôÇÔ∏è</span>
        <h1>Track Meet</h1>
      </div>
      <div class="header-controls">
        <button id="viewToggle" class="view-toggle" title="Toggle view">
          <span id="viewIcon">üìÖ</span>
        </button>
      </div>
    </header>

    <!-- Auth Section -->
    <div id="authSection" class="auth-section">
      <div class="auth-icon">üìÖ</div>
      <h2>Ready to Race?</h2>
      <p>Connect your Google Calendar to start tracking your recruiting performance!</p>
      <button id="authButton" class="btn btn-primary">
        <span>üöÄ</span> Connect Calendar
      </button>
    </div>

    <!-- Tab Navigation -->
    <div id="tabNav" class="tab-nav hidden">
      <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
      <button class="tab-btn" data-tab="weekly">Weekly</button>
      <button class="tab-btn" data-tab="monthly">Monthly</button>
      <button class="tab-btn" data-tab="sourcing">Sourcing</button>
    </div>

    <!-- Dashboard Tab -->
    <div id="dashboardTab" class="tab-content hidden">
      <!-- Morning Briefing -->
      <div class="briefing-card" id="morningBriefing">
        <div class="briefing-header">
          <span class="briefing-icon">‚òÄÔ∏è</span>
          <span class="briefing-title">Today's Focus</span>
        </div>
        <div class="briefing-content" id="briefingContent">
          <!-- Populated by JS -->
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="quick-stats">
        <div class="stat-card">
          <span class="stat-value" id="todayScreens">0</span>
          <span class="stat-label">Screens Today</span>
        </div>
        <div class="stat-card">
          <span class="stat-value" id="weekProgress">0%</span>
          <span class="stat-label">Week Progress</span>
        </div>
        <div class="stat-card">
          <span class="stat-value" id="monthProgress">0%</span>
          <span class="stat-label">Month Progress</span>
        </div>
      </div>

      <!-- Outreach Targets -->
      <div class="section-header">
        <span>üì§ Today's Outreach Targets</span>
      </div>
      <div id="outreachTargets" class="outreach-list">
        <!-- Populated by JS -->
      </div>

      <button id="settingsButton" class="btn btn-secondary">‚öôÔ∏è Settings</button>
    </div>

    <!-- Weekly Tab -->
    <div id="weeklyTab" class="tab-content hidden">
      <div class="week-header">
        <span class="week-label" id="weekLabel">This Week</span>
        <span class="week-status" id="weekStatus">On Track</span>
      </div>

      <div id="rolesList" class="roles-list">
        <!-- Role cards populated by JS -->
      </div>

      <div class="summary-section">
        <div class="summary-card">
          <span class="summary-label">Screens</span>
          <span class="summary-value" id="totalScreenings">0 / 0</span>
        </div>
        <div class="summary-card">
          <span class="summary-label">Outreach</span>
          <span class="summary-value" id="totalOutreach">0 / 0</span>
        </div>
      </div>

      <div class="progress-section">
        <span class="progress-label">Weekly Progress</span>
        <div class="progress-bar track">
          <div class="progress-fill runner" id="overallProgress" style="width: 0%">
            <span class="runner-icon">üèÉ</span>
          </div>
          <span class="finish-line">üèÅ</span>
        </div>
      </div>
    </div>

    <!-- Monthly Tab -->
    <div id="monthlyTab" class="tab-content hidden">
      <div class="month-header">
        <span class="month-label" id="monthLabel">January 2025</span>
        <span class="month-target" id="monthTarget">0 Hires</span>
      </div>

      <!-- Funnel Visualization -->
      <div class="funnel-section">
        <div class="funnel-step">
          <span class="funnel-label">Outreach</span>
          <div class="funnel-bar">
            <div class="funnel-fill" id="funnelOutreach" style="width: 0%"></div>
          </div>
          <span class="funnel-value" id="funnelOutreachValue">0 / 0</span>
        </div>
        <div class="funnel-step">
          <span class="funnel-label">Responses</span>
          <div class="funnel-bar">
            <div class="funnel-fill" id="funnelResponses" style="width: 0%"></div>
          </div>
          <span class="funnel-value" id="funnelResponsesValue">0 / 0</span>
        </div>
        <div class="funnel-step">
          <span class="funnel-label">Screens</span>
          <div class="funnel-bar">
            <div class="funnel-fill" id="funnelScreens" style="width: 0%"></div>
          </div>
          <span class="funnel-value" id="funnelScreensValue">0 / 0</span>
        </div>
        <div class="funnel-step">
          <span class="funnel-label">Finals</span>
          <div class="funnel-bar">
            <div class="funnel-fill" id="funnelFinals" style="width: 0%"></div>
          </div>
          <span class="funnel-value" id="funnelFinalsValue">0 / 0</span>
        </div>
        <div class="funnel-step">
          <span class="funnel-label">Offers</span>
          <div class="funnel-bar">
            <div class="funnel-fill" id="funnelOffers" style="width: 0%"></div>
          </div>
          <span class="funnel-value" id="funnelOffersValue">0 / 0</span>
        </div>
        <div class="funnel-step highlight">
          <span class="funnel-label">Hires</span>
          <div class="funnel-bar">
            <div class="funnel-fill" id="funnelHires" style="width: 0%"></div>
          </div>
          <span class="funnel-value" id="funnelHiresValue">0 / 0</span>
        </div>
      </div>

      <!-- Progress to Plan -->
      <div class="plan-status" id="planStatus">
        <span class="plan-icon">üìä</span>
        <span class="plan-message" id="planMessage">Loading...</span>
      </div>

      <!-- Role Breakdown -->
      <div class="section-header">
        <span>üìã By Role</span>
      </div>
      <div id="monthlyRoles" class="monthly-roles">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- Sourcing Tab -->
    <div id="sourcingTab" class="tab-content hidden">
      <div class="sourcing-header">
        <h2>üîç Candidate Sourcing</h2>
        <p class="sourcing-subtitle">Generate LinkedIn X-ray searches from a JD</p>
      </div>

      <!-- Role Selector -->
      <div class="sourcing-section">
        <label class="sourcing-label">Select Role</label>
        <select id="sourcingRole" class="sourcing-select">
          <option value="">-- Choose a role --</option>
        </select>
      </div>

      <!-- JD Input -->
      <div class="sourcing-section">
        <label class="sourcing-label">Paste Job Description or Ideal Profile</label>
        <textarea id="jdInput" class="jd-textarea" placeholder="Paste a job description, or describe your ideal candidate...

Example:
Looking for a Senior Backend Engineer with 5+ years experience in Node.js, Python, and AWS. Experience at startups preferred. Based in San Francisco or Remote."></textarea>
        <button id="parseJdBtn" class="btn btn-primary btn-full">üîç Generate Searches</button>
      </div>

      <!-- Quick Templates -->
      <div class="sourcing-section">
        <label class="sourcing-label">Or use a quick template</label>
        <div class="quick-templates">
          <button class="template-btn" data-template="Software Engineer">SWE</button>
          <button class="template-btn" data-template="Backend Engineer">Backend</button>
          <button class="template-btn" data-template="Frontend Engineer">Frontend</button>
          <button class="template-btn" data-template="Product Manager">PM</button>
          <button class="template-btn" data-template="Product Designer">Designer</button>
          <button class="template-btn" data-template="Data Scientist">Data</button>
        </div>
      </div>

      <!-- Location Input -->
      <div class="sourcing-section">
        <label class="sourcing-label">Location (optional)</label>
        <input type="text" id="locationInput" class="sourcing-input" placeholder="e.g., San Francisco, Remote, India">
      </div>

      <!-- Search Options -->
      <div class="sourcing-section">
        <div class="option-row">
          <span>Exclude "Open to Work"</span>
          <input type="checkbox" id="excludeOtw" class="toggle" checked>
        </div>
      </div>

      <!-- Generated Searches -->
      <div id="searchResults" class="search-results hidden">
        <label class="sourcing-label">Generated Searches</label>
        <div id="searchList" class="search-list">
          <!-- Search items populated by JS -->
        </div>
      </div>

      <!-- Outreach Log -->
      <div class="outreach-log">
        <div class="log-header">
          <span class="log-title">üìä Outreach Log</span>
          <span class="log-count" id="outreachCount">0 this week</span>
        </div>
        <div class="log-actions">
          <button id="logOutreachBtn" class="btn btn-small">+ Log Outreach</button>
        </div>
      </div>
    </div>

    <!-- Outreach Log Modal -->
    <div id="outreachModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Log Outreach</h3>
          <button id="closeOutreachModal" class="close-btn">√ó</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Role</label>
            <select id="outreachRole" class="sourcing-select"></select>
          </div>
          <div class="form-group">
            <label>Number of profiles contacted</label>
            <input type="number" id="outreachNumber" min="1" value="10" placeholder="e.g., 15">
          </div>
          <div class="form-group">
            <label>Notes (optional)</label>
            <input type="text" id="outreachNotes" placeholder="e.g., LinkedIn search, referrals">
          </div>
        </div>
        <div class="modal-footer">
          <button id="saveOutreach" class="btn btn-primary">Save</button>
        </div>
      </div>
    </div>

    <!-- Settings Section -->
    <div id="settingsSection" class="settings-section hidden">
      <div class="settings-header">
        <h2>‚öôÔ∏è Settings</h2>
        <button id="closeSettings" class="close-btn">√ó</button>
      </div>

      <!-- Monthly Goal -->
      <div class="settings-group">
        <label class="settings-label">Monthly Hire Target (Total)</label>
        <input type="number" id="monthlyHireTarget" class="settings-input" placeholder="e.g., 5" min="1">
      </div>

      <!-- Roles Configuration -->
      <div class="settings-group">
        <label class="settings-label">Roles & Conversion Rates</label>
        <div id="rolesConfig" class="roles-config">
          <!-- Populated by JS -->
        </div>
        <button id="addRoleBtn" class="btn btn-small">+ Add Role</button>
      </div>

      <!-- Calendar Keywords -->
      <div class="settings-group">
        <label class="settings-label">Screen Detection Keywords</label>
        <input type="text" id="screenKeywords" class="settings-input" placeholder="screen, phone screen, interview">
        <span class="settings-hint">Comma-separated keywords to identify screens in your calendar</span>
      </div>

      <!-- Notifications -->
      <div class="settings-group">
        <label class="settings-label">Notifications</label>

        <div class="notif-row">
          <div class="notif-toggle">
            <input type="checkbox" id="morningNotif" class="toggle">
            <span>Morning Briefing</span>
          </div>
          <div class="notif-time">
            <select id="morningTime" class="time-select">
              <option value="7">7 AM</option>
              <option value="8">8 AM</option>
              <option value="9" selected>9 AM</option>
              <option value="10">10 AM</option>
            </select>
          </div>
        </div>

        <div class="notif-row">
          <div class="notif-toggle">
            <input type="checkbox" id="weeklyNotif" class="toggle">
            <span>Weekly Report</span>
          </div>
          <div class="notif-time">
            <select id="weeklyDay" class="time-select">
              <option value="4">Thursday</option>
              <option value="5" selected>Friday</option>
            </select>
            <select id="weeklyTime" class="time-select">
              <option value="16">4 PM</option>
              <option value="17" selected>5 PM</option>
              <option value="18">6 PM</option>
            </select>
          </div>
        </div>

        <div class="notif-row">
          <div class="notif-toggle">
            <input type="checkbox" id="sundayNotif" class="toggle">
            <span>Outreach Plan</span>
          </div>
          <div class="notif-time">
            <select id="sundayDay" class="time-select">
              <option value="0" selected>Sunday</option>
              <option value="6">Saturday</option>
            </select>
            <select id="sundayTime" class="time-select">
              <option value="17">5 PM</option>
              <option value="18" selected>6 PM</option>
              <option value="19">7 PM</option>
              <option value="20">8 PM</option>
            </select>
          </div>
        </div>
      </div>

      <div class="settings-actions">
        <button id="saveSettings" class="btn btn-primary">üíæ Save</button>
        <button id="cancelSettings" class="btn btn-secondary">Cancel</button>
      </div>
    </div>

    <!-- Role Editor Modal -->
    <div id="roleModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="roleModalTitle">Edit Role</h3>
          <button id="closeRoleModal" class="close-btn">√ó</button>
        </div>

        <div class="modal-body">
          <div class="form-group">
            <label>Role Name</label>
            <input type="text" id="roleName" placeholder="e.g., Software Engineer">
          </div>

          <div class="form-group">
            <label>Monthly Hire Target</label>
            <input type="number" id="roleHireTarget" placeholder="e.g., 2" min="0">
          </div>

          <div class="form-group">
            <label>Search Terms (comma-separated)</label>
            <input type="text" id="roleSearchTerms" placeholder="e.g., swe screen, engineer interview">
          </div>

          <div class="form-divider">Conversion Rates</div>

          <div class="rates-grid">
            <div class="rate-input">
              <label>Response Rate</label>
              <div class="input-with-suffix">
                <input type="number" id="rateResponse" min="1" max="100" value="15">
                <span>%</span>
              </div>
            </div>
            <div class="rate-input">
              <label>Interest Rate</label>
              <div class="input-with-suffix">
                <input type="number" id="rateInterest" min="1" max="100" value="60">
                <span>%</span>
              </div>
            </div>
            <div class="rate-input">
              <label>Screen Rate</label>
              <div class="input-with-suffix">
                <input type="number" id="rateScreen" min="1" max="100" value="80">
                <span>%</span>
              </div>
            </div>
            <div class="rate-input">
              <label>Pass-through</label>
              <div class="input-with-suffix">
                <input type="number" id="ratePassThrough" min="1" max="100" value="25">
                <span>%</span>
              </div>
            </div>
            <div class="rate-input">
              <label>Offer Rate</label>
              <div class="input-with-suffix">
                <input type="number" id="rateOffer" min="1" max="100" value="50">
                <span>%</span>
              </div>
            </div>
            <div class="rate-input">
              <label>Accept Rate</label>
              <div class="input-with-suffix">
                <input type="number" id="rateAccept" min="1" max="100" value="80">
                <span>%</span>
              </div>
            </div>
          </div>

          <div class="calculated-preview">
            <span class="preview-label">To hire 1:</span>
            <span class="preview-value" id="calculatedOutreach">~333 outreach needed</span>
          </div>
        </div>

        <div class="modal-footer">
          <button id="deleteRole" class="btn btn-danger">Delete</button>
          <button id="saveRole" class="btn btn-primary">Save Role</button>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
